---
title: "[DDIA] 数据模型和查询语言"
date: 2023-05-16
tags:
  - DDIA
categories:
  - 阅读笔记
  - DDIA
published: true
toc: "true"
comments: "true"
description:
---
>如何分析一个数据模型 & 如何考量查询语言

<!--more-->

## 1 概要
如何分析一个**数据模型**：
1. 基本考察点：数据基本元素，和元素之间的对应关系（一对多，多对多）
2. 利用几种常用模型来比较：（最为流行的）关系模型，（树状的）文档模型，（极大自由度的）图模型。
3. schema 模式：强 Schema（写时约束）；弱 Schema（读时解析）

如何考量**查询语言**：
1. 如何与数据模型关联、匹配
2. 声明式（declarative）和命令式（imperative）

### 1.1 数据模型
>A data model is an abstract model that organizes elements of data and standardizes how they relate to one another and to the properties of real-world entities. —https://en.wikipedia.org/wiki/Data_model

**数据模型**：如何组织数据，如何标准化关系，如何关联现实。
1. 作为**应用开发者，** 你将现实中的具体问题抽象为一组对象、**数据结构（data structure）** 以及作用于其上的 API。
2. 作为**数据库管理员（DBA）**，为了持久化上述数据结构，你需要将他们表达为通用的**数据模型（data model）**，如文档数据库中的 XML/JSON、关系数据库中的表、图数据库中的图。
3. 作为**数据库系统开发者**，你需要将上述数据模型组织为内存中、硬盘中或者网络中的**字节（Bytes）** 流，并提供多种操作数据集合的方法。
4. 作为**硬件工程师**，你需要将字节流表示为二极管的电位（内存）、磁场中的磁极（磁盘）、光纤中的光信号（网络）。


## 2 关系模型与文档模型
### 2.1 关系模型
特点如下：
1. 将数据以**关系**呈现给用户（比如：一组包含行列的二维表）。
2. 提供操作数据集合的**关系算子**。
**常见分类**

1. 事务型（TP）：银行交易、火车票
2. 分析型（AP）：数据报表、监控表盘
3. 混合型（HTAP）：

### 2.2 NoSQL
1. 处理更大数据集：更强伸缩性、更高吞吐量
2. 开源免费的兴起：冲击了原来把握在厂商的标准
3. 特化的查询操作：关系数据库难以支持的，比如图中的多跳分析
4. 表达能力更强：关系模型约束太严，限制太多
### 2.3 面向对象和关系模型的不匹配
核心冲突在于面向对象的**嵌套性**和关系模型的**平铺性**
关系模型很难直观的表示**一对多**的关系。比如简历上，一个人可能有多段教育经历和多段工作经历。
**文档模型**：使用 Json 和 XML 的天然嵌套。
**关系模型**：使用 SQL 模型就得将职位、教育单拎一张表，然后在用户表中使用外键关联。
在简历的例子中，文档模型还有几个优势：
1. **模式灵活**：可以动态增删字段，如工作经历。
2. **更好的局部性**：一个人的所有属性被集中访问的同时，也被集中存储。
3. **结构表达语义**：简历与联系信息、教育经历、职业信息等隐含一对多的树状关系可以被 JSON 的树状结构明确表达出来。

### 2.4 文档模型
文档型数据库使用场景特点：
1. 有多种类型的数据，但每个放一张表又不合适。
2. 数据类型和结构由外部决定，你没办法控制数据的变化。

## 3 图模型
- 文档模型的适用场景？ 你的建模场景中存在着大量**一对多**（one-to-many）的关系。
- 图模型的适用场景？ 你的建模场景中存在大量的**多对多**（many-to-many）的关系。
- 
图数据模型（属性图）的基本概念一般有三个：**点**，**边**和附着于两者之上的**属性**。


